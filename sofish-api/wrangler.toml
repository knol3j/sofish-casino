name = "sofish-api"
main = "src/index.ts"
compatibility_date = "2024-11-01"
compatibility_flags = ["nodejs_compat"]

# Public environment variables
[vars]
ENVIRONMENT = "production"
API_VERSION = "v1"
MAX_BET_AMOUNT = "1000"

# KV Namespaces (IDs will be generated after creation)
# Run: npx wrangler kv:namespace create SESSIONS
# Run: npx wrangler kv:namespace create CACHE
[[kv_namespaces]]
binding = "SESSIONS"
id = "YOUR_SESSIONS_KV_ID"  # Replace after running: npx wrangler kv:namespace create SESSIONS
preview_id = "YOUR_SESSIONS_PREVIEW_KV_ID"

[[kv_namespaces]]
binding = "CACHE"
id = "YOUR_CACHE_KV_ID"  # Replace after running: npx wrangler kv:namespace create CACHE

# D1 Databases (ID will be generated after creation)
# Run: npx wrangler d1 create sofish-db
[[d1_databases]]
binding = "DB"
database_name = "sofish-db"
database_id = "YOUR_DATABASE_ID"  # Replace after running: npx wrangler d1 create sofish-db

# Rate Limiting
[[ratelimits]]
name = "API_RATE_LIMITER"
namespace_id = "1001"
simple = { limit = 100, period = 60 }

[[ratelimits]]
name = "GAME_RATE_LIMITER"
namespace_id = "1002"
simple = { limit = 10, period = 60 }

# Observability
[observability]
enabled = true
